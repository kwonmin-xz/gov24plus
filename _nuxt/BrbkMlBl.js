import{_ as c,U as m,q as l,o as n,c as r,a as d,k as u,f as b,h as f}from"./DSfHGzKa.js";const M={data(){return{isModalVisible:!1,iframeSrc:""}},mounted(){const s=m(),e=l().public.mobileCertUrl;s.isMobileOrTablet?this.iframeSrc=`${e}/mobile/web/mobileView?vueOrigin=`+encodeURIComponent(window.location.origin):this.iframeSrc=`${e}/mobile/web/pcView?vueOrigin=`+encodeURIComponent(window.location.origin)},methods:{openModal(){this.isModalVisible=!0,window.addEventListener("message",this.handlePostMessage)},closeModal(){this.isModalVisible=!1,window.removeEventListener("message",this.handlePostMessage)},setupPostMessageListener(){window.addEventListener("message",this.handlePostMessage)},handlePostMessage(s){const e=l().public.mobileCertUrl;if(s.origin!=e)return;const i=s.data;s.data==="close"&&this.closeModal(),i.result?(this.$emit("auth-success",i),this.closeModal()):i.result||(this.$emit("auth-fail",i),this.closeModal())}}},g=["src"];function h(s,e,i,p,t,o){return n(),r("div",null,[t.isModalVisible?(n(),r("div",{key:0,class:"modal-backdrop",onClick:e[2]||(e[2]=(...a)=>o.closeModal&&o.closeModal(...a))},[d("div",{class:u(s.$device.isMobileOrTablet?"modal-container-mob":"modal-container"),onClick:e[1]||(e[1]=b(()=>{},["stop"]))},[d("iframe",{src:t.iframeSrc,class:"modal-iframe",frameborder:"0",onLoad:e[0]||(e[0]=(...a)=>o.setupPostMessageListener&&o.setupPostMessageListener(...a))},null,40,g)],2)])):f("",!0)])}const v=c(M,[["render",h],["__scopeId","data-v-69b30aca"]]);export{v as _};
